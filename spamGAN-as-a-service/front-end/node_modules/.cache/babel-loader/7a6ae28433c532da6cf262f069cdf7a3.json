{"ast":null,"code":"import _classCallCheck from\"/Users/shenyankun/react-complete-guide projects/spamgan-as-service/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/shenyankun/react-complete-guide projects/spamgan-as-service/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/shenyankun/react-complete-guide projects/spamgan-as-service/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/shenyankun/react-complete-guide projects/spamgan-as-service/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"/Users/shenyankun/react-complete-guide projects/spamgan-as-service/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import{Input,Upload,message,Layout,Button,Table,Spin,Card}from'antd';import{UploadOutlined}from'@ant-design/icons';import axios from'axios';import\"./Main.css\";import'antd/es/spin/style/css';import'antd/dist/antd.css';var TextArea=Input.TextArea;var Header=Layout.Header,Content=Layout.Content,Footer=Layout.Footer;var columns=[{title:'Review',dataIndex:'review',width:'80%'},{title:'Result',dataIndex:'result',width:'20%'}];var getRandomuserParams=function getRandomuserParams(params){return _objectSpread({results:params.pagination.pageSize,page:params.pagination.current},params);};var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={selectedFile:null,review:null,loading:true,data:[],reviews:[],pagination:{current:1,pageSize:10},showTable:false,showCard:false,result:null};_this.fileChangeHandler=function(info,event){if(info.file.status!=='uploading'){console.log(info.file,info.fileList);}if(info.file.status==='done'){message.success(\"\".concat(info.file.name,\" file uploaded successfully\"));}else if(info.file.status==='error'){message.error(\"\".concat(info.file.name,\" file upload failed.\"));}};_this.reviewChangeHandler=function(event){_this.setState({review:event.target.value});};_this.postFileHandler=function(){if(_this.state.review){_this.setState({showCard:true,loading:true});axios.post('http://3.139.179.60/singleinference',_this.state.review,{timeout:5*60*1000}).then(function(response){console.log(response);var labels=response.data;var res=labels[0]===1?'SPAM':'Non-SPAM';_this.setState({result:res,loading:false});});}else if(_this.state.selectedFile){_this.setState({loading:true,showTable:true});var formData=new FormData();formData.append(\"file\",_this.state.selectedFile,_this.state.selectedFile.name);axios.post('http://3.139.179.60/inference',formData,{timeout:5*60*1000}).then(function(response){console.log(response.data);var labels=response.data;var newData=[];_this.state.reviews.map(function(comment,idx){var dataPoint={key:idx,review:comment,result:labels[idx]===1?'SPAM':'Non-SPAM'};console.log(labels[idx]);newData.push(dataPoint);});var newPagination=_objectSpread(_objectSpread({},_this.state.pagination),{},{total:newData.length});_this.setState({data:newData,loading:false,pagination:newPagination,showTable:true});});}};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var pagination=this.state.pagination;axios.get('http://3.139.179.60/ping').then(function(response){console.log(response);});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"section\",{id:\"test\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"Test\",children:[/*#__PURE__*/_jsxs(Content,{style:{maxWidth:'800px',margin:'auto'},children:[/*#__PURE__*/_jsx(TextArea,{rows:4,name:\"review\",onChange:this.reviewChangeHandler,disabled:this.state.selectedFile,style:{width:'800px'}}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:\"30px\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Or you can also choose to upload a file. (Only .txt files are acceptable)\"}),\" \"]}),/*#__PURE__*/_jsx(Upload,{accept:\".txt\",beforeUpload:function beforeUpload(file){var reader=new FileReader();var reviews=[];reader.onload=function(e){var lines=e.target.result.split('\\n');console.log(lines);lines.map(function(line){return reviews.push(line);});};reader.readAsText(file);_this2.setState({selectedFile:file,reviews:reviews});console.log(reviews.length);// Prevent upload\nreturn false;},onChange:this.fileChangeHandler,name:\"file\",children:/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(UploadOutlined,{}),disabled:this.state.review,children:\"Click to Upload\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"primary\",shape:\"round\",onClick:this.postFileHandler,children:\"Submit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Table,{style:{margin:'auto',borderRadius:'25px',display:this.state.showTable===false?'none':'block'},columns:columns,loading:this.state.loading,dataSource:this.state.data,pagination:this.state.pagination})]}),/*#__PURE__*/_jsx(Card,{title:\"Result\",style:{width:300,margin:'auto',marginBottom:'20px',display:this.state.showCard===false?'none':'block'},loading:this.state.loading,children:/*#__PURE__*/_jsx(\"p\",{children:this.state.result})})]});}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/Users/shenyankun/react-complete-guide projects/spamgan-as-service/src/Components/Main/Main.js"],"names":["React","Component","Input","Upload","message","Layout","Button","Table","Spin","Card","UploadOutlined","axios","TextArea","Header","Content","Footer","columns","title","dataIndex","width","getRandomuserParams","params","results","pagination","pageSize","page","current","Main","state","selectedFile","review","loading","data","reviews","showTable","showCard","result","fileChangeHandler","info","event","file","status","console","log","fileList","success","name","error","reviewChangeHandler","setState","target","value","postFileHandler","post","timeout","then","response","labels","res","formData","FormData","append","newData","map","comment","idx","dataPoint","key","push","newPagination","total","length","get","maxWidth","margin","marginTop","reader","FileReader","onload","e","lines","split","line","readAsText","borderRadius","display","marginBottom"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Input, Upload, message, Layout, Button, Table, Spin, Card } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport \"./Main.css\";\nimport 'antd/es/spin/style/css';\nimport 'antd/dist/antd.css';\n\n\nconst { TextArea } = Input;\nconst { Header, Content, Footer } = Layout;\n\n\nconst columns = [\n    {\n        title: 'Review',\n        dataIndex: 'review',\n        width: '80%',\n    },\n    {\n        title: 'Result',\n        dataIndex: 'result',\n        width: '20%',\n    }\n]\n\n\nconst getRandomuserParams = params => {\n    return {\n      results: params.pagination.pageSize,\n      page: params.pagination.current,\n      ...params,\n    };\n};\n\nclass Main extends Component {\n   \n    state = {\n        selectedFile: null,\n        review: null,\n        loading: true,\n        data: [],\n        reviews: [],\n        pagination: {\n            current: 1,\n            pageSize: 10,\n        },\n        showTable: false,\n        showCard: false,\n        result: null\n    }\n\n    fileChangeHandler = (info, event) => {\n        if (info.file.status !== 'uploading') {\n            console.log(info.file, info.fileList);\n        }\n        if (info.file.status === 'done') {\n            message.success(`${info.file.name} file uploaded successfully`);\n        } else if (info.file.status === 'error') {\n            message.error(`${info.file.name} file upload failed.`);\n        }\n    }\n\n    reviewChangeHandler = (event) => {\n        this.setState({review: event.target.value})\n    }\n\n    postFileHandler = () => {\n        if (this.state.review) {\n            this.setState({showCard: true, loading: true})\n            axios.post('http://3.139.179.60/singleinference', this.state.review, {timeout: 5 * 60 * 1000})\n            .then(response => {\n                console.log(response);\n                const labels = response.data\n                const res = labels[0] === 1 ? 'SPAM' : 'Non-SPAM'\n                this.setState({result: res, loading: false})\n            });\n        } else if (this.state.selectedFile) {\n            this.setState({loading: true,\n                showTable: true})\n            const formData = new FormData(); \n            formData.append( \n                \"file\", \n                this.state.selectedFile, \n                this.state.selectedFile.name \n            ); \n            axios.post('http://3.139.179.60/inference', formData, {timeout: 5 * 60 * 1000})\n            .then(response => {\n                console.log(response.data);\n                const labels = response.data\n                const newData = []\n                this.state.reviews.map((comment, idx) => {\n                    let dataPoint = {\n                        key: idx,\n                        review: comment,\n                        result: labels[idx] === 1 ? 'SPAM' : 'Non-SPAM'\n                    };\n                    console.log(labels[idx])\n                    newData.push(dataPoint)\n                })\n                const newPagination = {...this.state.pagination,\n                    total: newData.length    \n                }\n                this.setState({\n                    data: newData,\n                    loading: false,\n                    pagination: newPagination,\n                    showTable: true\n                })\n            });\n        }\n    }\n    \n    componentDidMount () {\n        const { pagination } = this.state;\n        axios.get( 'http://3.139.179.60/ping' )\n        .then(response => {\n            console.log(response);\n        });\n    }\n\n    render () {\n        return (\n            <section id=\"test\" >\n                <div className=\"Test\">\n                    <Content style={{ maxWidth: '800px', margin: 'auto'}}>\n                        <TextArea\n                            rows={4}\n                            name='review'\n                            onChange={this.reviewChangeHandler}\n                            disabled={this.state.selectedFile}\n                            style={{width: '800px'}} />\n                        <p style={{marginTop: \"30px\"}}><strong>Or you can also choose to upload a file. (Only .txt files are acceptable)</strong> </p>\n                        <Upload \n                            accept=\".txt\" \n                            beforeUpload={file => {\n                                const reader = new FileReader();\n                                const reviews = []\n                                reader.onload = e => {\n                                    const lines = e.target.result.split('\\n')\n                                    console.log(lines)\n                                    lines.map(line => reviews.push(line))\n                                };\n                                reader.readAsText(file);\n                                this.setState({selectedFile: file,\n                                    reviews: reviews})\n                                console.log(reviews.length)\n\n                                // Prevent upload\n                                return false;\n                            }}\n                            onChange={this.fileChangeHandler} \n                            name='file'>\n                            <Button icon={<UploadOutlined />} disabled={this.state.review}>Click to Upload</Button>\n                        </Upload>\n                    </Content>\n                    <br />\n                    <Button type=\"primary\" shape=\"round\" onClick={this.postFileHandler}>Submit</Button>\n                    <br />\n                    <br />\n                    <Table\n                        style = {{\n                            margin: 'auto',\n                            borderRadius: '25px',\n                            display: this.state.showTable === false ? 'none' : 'block'\n                        }}\n                        columns={columns}\n                        loading={this.state.loading}\n                        dataSource={this.state.data}\n                        pagination={this.state.pagination} />                    \n                </div>\n                <Card title=\"Result\"  \n                    style={{ width: 300, \n                             margin: 'auto',\n                             marginBottom: '20px',\n                             display: this.state.showCard === false ? 'none' : 'block' }}\n                    loading={this.state.loading} >\n                    <p>{this.state.result}</p>\n                </Card>\n            </section>\n        );\n    }\n    \n}\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}